# OS_HW_1

# Операционные системы. ИДЗ № 2. Вариант 2 <br/> Киселев Иван Александрович БПИ217.

## Условие:

> Задача о Винни-Пухе – 1 или правильные пчелы. В одном лесу живут n пчел и один медведь, которые используют один горшок меда, вместимостью Н глотков. Сначала горшок пустой. Пока горшок не наполнится, медведь спит. Как только горшок заполняется, медведь просыпается и съедает весь мед, после чего снова засыпает. Каждая пчела многократно собирает по одному глотку меда и кладет его в горшок. Пчела, которая приносит последнюю порцию меда, будит медведя. Создать приложение, моделирующее поведение пчел и медведя. Медведя и каждую из пчел представить отдельными процессами.
## Описание репозитория:

### Решения задачи на C на 10 балов

**Папки с решениями, находятся в корневой папке репозитория**

Каждая папка содержит в себе:

> * Файлы на языке C с решением задачи на указанный в названии папки балл
>
> * Исполняемые файлы

**Текстовые файлы с входными данными для тестов, также лежат в корневой папке репозитория**

## Отсчет:

### Формат входных данных

На вход поступает одно число, обозначающее вместимость горшка с медом 7, далее поступает число обозначающее количество пчел 3
```shell
./main.exe 7 3
```

### Как запускать программу
На 4-6:
Программы сначала компилируются
```
gcc -o main.exe main.c
```
Затем запускаются

```
./main.exe 7 3
```

Для решений с двумя независимыми процессами (7-8)
запускается сначала bees.exe (чтобы появился горшок и улей)
а затем bear.exe:
```
gcc bees.c -o bees.exe
./bees.exe 7 3
```
Медведь не знает столько пчел, но знает вместимость горшка
```
gcc bear.c -o bear.exe
./bear.exe 7
```
Медведя можно завершать и включать однако, если завершить пчел, 
то все программы завершаться

Для решений на 9-10
запускается сначала pot.exe (чтобы появился горшок и улей), 
затем bear.exe, затем сколько угодно bee.exe:
Первый аргумент вместимость горшка
```
gcc pot.c -o pot.exe
./pot.exe 7
```
Медведь не знает столько пчел и теперь ему неважно сколько в горшке
```
gcc bear.c -o bear.exe
./bear.exe
```
Первый аргумент вместимость горшка, второй аргумент сколько меда производит пчела
```
gcc bee.c -o bee.exe
./bee.exe 7 1
```
ВАЖНО!
Завершение программ на 9-10:
Стоит завершать программы в следующем порядке:
сначала медведь, потом pot, потом пчелы.
Однако можно убирать и добавлять столько угодно 
пчел пока есть хотя бы одна
Важно перед тем как завершить последнюю пчелы завершить процесс медведя

### Сценарий решаемой задачи
**Задание на 4,5,6 баллов:**
> Родительский процесс представляет из себя медведя,
> сначала он создает горшок меда (разделяемую память),
> затем n дочерних процессов -- пчел, которые каждые 2 секунды приносят по глотку меда,
> (и последняя пчела, которая принесла мед, разбудит медведя),
> далее  в цикле:
> собирает информацию (обращаясь в разделяемую память) о том, не будит ли его пчела (когда горшок полон), 
> как только его разбудили он съедает мед (зануляет число в разделяемой памяти), и спит 1 секунду.
> При получении сигнала все сущности прекращают работу и удаляют семафоры, каналы и память

**Задание на 7,8 баллов:**
> Теперь модель сделана на двух независимых процессах программами bear.c и bees.c
> Отличие от прошлого сценария в том, что пчел порождает не медведь, а "королева пчел" bees, которая еще и 
> создает горшок (разделяемую память), а также теперь завершить процессы (в т.ч медведя) можно из программы bees.exe 
> (завершение медведя будет лишь останавливать его, но пчелы буду работать)

**Задание на 9, 10 баллов**
> Теперь модель сделана на трех и более независимых процессах программами bear.c, pot.c и bee.c
> Отличие от первого сценария в том, что теперь пчелы не могу порождать друг друга 
> (к сожалению придется запускать их по одной, однако теперь
> можно вторым параметром указать сколько меда добавляет каждая).
> Медведь ждет сообщения от пчелы с помощью канала, ВАЖНО!, 
> что перед удалением последней пчелы надо завершить процесс медведя 
> (иначе он сойдет с ума от паники, одиночества и бесконечного ожидания)
> Pot представляет собой горшок, который дает информацию о себе пчелам
> через каналы, он выступает как портфель задач. (Он закрывается сам, когда не остается пчел)
> Плеча обращается к горшку, и когда понимает что он полный будит медведя

### Тестирование программ:
Произведены тесты всех программ, результаты расположены в папках программ
**Задание на 4 балла:**

![img.png](images/task_4.png)

**Задание на 5 баллов:**

![img.png](images/task_5.png)

**Задание на 6 баллов:**

![img.png](images/task_6.png)

**Задание на 7 баллов:**

![img.png](images/task_7.png)

**Задание на 8 баллов:**

![img.png](images/task_8.png)

**Задание на 9 баллов:**

![img.png](images/task_9_bees.png)

![img.png](images/task_9_other.png)

**Задание на 10 баллов:**

![img.png](images/task_10_bees.png)

![img.png](images/task_10_other.png)



